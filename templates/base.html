<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>PET SHOW - {{ title }}</title>
    <!-- Google Font: Source Sans Pro -->
    <link
      rel="shortcut icon"
      href="/static/img/logo_favicon.png"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
    />
    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="/static/components/AdminLTE/plugins/fontawesome-free/css/all.min.css"
    />
    <!-- IonIcons -->
    <link
      rel="stylesheet"
      href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"
    />
    <!-- Theme style -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="/static/components/AdminLTE/dist/css/adminlte.min.css"
    />

    <title>{% block title %} PET SHOW {% endblock title %}</title>
  </head>
  <body class="sidebar-mini">
    <header></header>
    <div class="wrapper">
      <section class="content">
        <div class="container-fluid">{% block main %} {% endblock main %}</div>
      </section>
    </div>
    <footer>{% include 'partials/footer.html'%}</footer>
  </body>
  <script>
    const tbodyEl = document.querySelector("tbody");
    const tableEl = document.querySelector("table");
    let counter = 0;
    function adicionaLinhaProduto(e) {
      e.preventDefault();
      tbodyEl.innerHTML += `
            <tr>
                <td>
                  <select name="produto_id[${counter}]" class="form-control">
                    {% for produto in produtos %}
                        <option value="{{produto.id}}">{{produto.nome}} - {{produto.preco_venda}}</option>
                    {% endfor %}
                  </select>
                </td>
                <td>
                  <input type="number" name="quantidade[${counter}]" class="form-control"/>
                </td>
                <td>
                  <button class="btn btn-danger deleteBtn">X</button>
                </td>
            </tr>
        `;
    }

    function onDeleteRow(e) {
      if (!e.target.classList.contains("deleteBtn")) {
        return;
      }

      const btn = e.target;
      btn.closest("tr").remove();
    }

    document.getElementById("adiciona-produto").addEventListener("click", adicionaLinhaProduto);
    tableEl.addEventListener("click", onDeleteRow);
  </script>
</html>
