{% extends 'base.html' %}

{% include 'partials/header.html' %}

{% with tipo='produtos' %}
{% include 'partials/sidebar.html'%}
{% endwith %}


{% block main %}
    <form {% if not produto.id %} action="/produtos" {% elif produto.id != None %} action="/produtos/edit/{{produto.id}}" {% endif %} method="POST">
        <input type="hidden" value="{{produto.id}}">
        <label for="nome">Nome </label>
        <input type="text" name="nome" id="nome" value="{{produto.nome}}">
        <br>
        <label for="nome">Descrição </label>
        <input type="text" name="descricao" id="descricao" value="{{produto.descricao}}">
        <br>
        <label for="modelo">Modelo </label>
        <input type="text" name="modelo" id="modelo" value="{{produto.modelo}}">
        <br>
        <label for="cod_barras">Cód. de barras </label>
        <input type="number" name="cod_barras" id="cod_barras" value="{{produto.cod_barras}}">
        <br>
        <label for="porcentagem">Porcentagem</label>
        <input type="number" name="porcentagem" id="porcentagem" value="{{produto.porcentagem}}">
        <br>
        <label for="preco_custo">Preço custo </label>
        <input type="number" name="preco_custo" id="preco_custo" value="{{produto.preco_custo}}">
        <br>
        <label for="preco_venda">Preço venda </label>
        <input type="number" name="preco_venda" id="preco_venda" value="{{produto.preco_venda}}">
        <br>
        <label for="quantidade">Quantidade</label>
        <input type="number" name="quantidade" id="quantidade" value="{{produto.quantidade}}">
        <br>
        <label for="foto">Foto </label>
        <input type="text" name="foto" id="foto" value="{{produto.foto}}">
        <br>
        <label for="marca_id">Marca:</label>
        <select name="marca_id" id="marca_id">
          {% for marca in marcas %}
            {% if marca.id == produto.marca_id %}
              <option value="{{marca.id}}" selected>{{marca.marca}}</option>
            {% endif %}
            {% if marca.id != produto.marca_id %}
              <option value="{{marca.id}}">{{marca.marca}}</option>
            {% endif %}
          {% endfor %}
        </select>
        <br>
        <label for="tamanho_id">Tamanho:</label>
        <select name="tamanho_id" id="tamanho_id" >
          {% for tamanho in tamanhos %}
            {% if tamanho.id == produto.tamanho_id %}
              <option value="{{tamanho.id}}" selected>{{tamanho.tamanho}}</option>
            {% endif %}
            {% if tamanho.id != produto.tamanho_id %}
              <option value="{{tamanho.id}}">{{tamanho.tamanho}}</option>
            {% endif %}
          {% endfor %}
        </select>
        <br>
        <label for="animal_id">Animal:</label>
        <select name="animal_id" id="animal_id">
          {% for animal in animais %}
            {% if animal.id == produto.animal_id %}
              <option value="{{animal.id}}" selected>{{animal.animal}}</option>
            {% endif %}
            {% if animal.id != produto.animal_id %}
              <option value="{{animal.id}}">{{animal.animal}}</option>
            {% endif %}
          {% endfor %}
        </select>
        <br>
        <button type="submit">Cadastrar</button>
    </form>

    <h2>Produtos</h2>

    <div class="container">
      <table class="table">
          <thead>
            <tr>
              <th scope="col">Imagem</th>
              <th scope="col">Descrição</th>
              <th scope="col">Modelo</th>
              <th scope="col">Nome</th>
              <th scope="col">Preço custo</th>
              <th scope="col">Preço venda</th>
              <th scope="col">Quantidade</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            {% for produto in produtos %}
            <tr>
              <td><img src="{{produto.foto}}" style="width: 50px; height: 50px"></td>
              <td>{{produto.descricao}}</td>
              <td>{{produto.modelo}}</td>
              <td>{{produto.nome}}</td>
              <td>{{produto.preco_custo}}</td>
              <td>{{produto.preco_venda}}</td>
              <td>{{produto.quantidade}}</td>
              <td><a href="/produtos/delete/{{produto.id}}"><i class="fas fa-trash" style="color: red"></i></a> <a href="/produtos/buscar/{{produto.id}}"><i class="fas fa-pencil-alt"></i></a></td>
            </tr>
          </tbody>
          {% endfor %}
      </table>
    </div>
{% endblock main %}

{% include 'partials/footer.html' %}
